@page
@model MediTrack.Identity.Pages.Account.Login.Index

<div class="login-page">
    <div class="login-card">
        <div class="login-header">
            <h1>MediTrack</h1>
            <p>Healthcare Management Platform</p>
        </div>

        @if (Model.View.EnableLocalLogin)
        {
            <form asp-page="/Account/Login/Index" method="post">
                <input type="hidden" asp-for="Input.ReturnUrl" />

                <div asp-validation-summary="ModelOnly" class="validation-summary"></div>

                <div class="form-group">
                    <label asp-for="Input.Username">Email</label>
                    <input asp-for="Input.Username" class="form-input" placeholder="you@example.com" autofocus />
                </div>

                <div class="form-group">
                    <label asp-for="Input.Password">Password</label>
                    <input asp-for="Input.Password" type="password" class="form-input" placeholder="Enter your password" />
                </div>

                @if (Model.View.AllowRememberLogin)
                {
                    <div class="form-group-inline">
                        <input asp-for="Input.RememberLogin" type="checkbox" />
                        <label asp-for="Input.RememberLogin">Remember me</label>
                    </div>
                }

                <button class="btn btn-primary" name="Input.Button" value="login">Sign In</button>

                <div class="register-link">
                    <p>Don't have an account? <a asp-page="/Account/Register/Index" asp-route-returnUrl="@Model.Input.ReturnUrl">Register here</a></p>
                </div>

                @if (Model.View.VisibleExternalProviders.Any())
                {
                    <div class="external-providers">
                        <p>Or sign in with</p>
                        @foreach (var provider in Model.View.VisibleExternalProviders)
                        {
                            <a class="btn btn-external"
                               asp-page="/Account/ExternalLogin"
                               asp-route-scheme="@provider.AuthenticationScheme"
                               asp-route-returnUrl="@Model.Input.ReturnUrl">
                                @provider.DisplayName
                            </a>
                        }
                    </div>
                }
            </form>
        }
        else if (Model.View.VisibleExternalProviders.Any())
        {
            <div class="external-providers">
                @foreach (var provider in Model.View.VisibleExternalProviders)
                {
                    <a class="btn btn-external"
                       asp-page="/Account/ExternalLogin"
                       asp-route-scheme="@provider.AuthenticationScheme"
                       asp-route-returnUrl="@Model.Input.ReturnUrl">
                        @provider.DisplayName
                    </a>
                }
            </div>
        }
        else
        {
            <div class="alert">No login schemes configured for this client.</div>
        }
    </div>
</div>
